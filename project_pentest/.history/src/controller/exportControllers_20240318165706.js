import * as service from "../service/renderPDF.js"
const getPdfPage = async(req,res) =>{
    const url = req.get("Referer")
   try {
    const pdfBuffer  = await service.renderPDF(url)
    res.status(200)
    res.set({
      'Content-Type': 'application/pdf',
      'Content-Disposition': 'inline',
    })
    res.send(pdfBuffer);
   } catch (error) {
    console.log(error)
    const err  =  new Error(error)
    res.status(500)
    res.setHeader('Content-Type', 'application/json')
    res.end(JSON.stringify({
      error: {
        message: error.message,
        statusCode: '500'
        // Bạn có thể bổ sung thêm chi tiết lỗi ở đây nếu cần thiết
    }
    }))
    
    return;
   }
}
   export {getPdfPage}